# ==============================================
# BikeDreams Backend - Environment Template
# ==============================================
# IMPORTANTE: 
# 1. Copiar este archivo a .env.production (nunca commitear .env.production)
# 2. Reemplazar TODAS las variables con valores reales
# 3. Configurar estas variables en GitHub Secrets para CI/CD

# Environment
NODE_ENV=production
LOG_LEVEL=info
SECURITY_LOG_LEVEL=warn

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
DATABASE_URL=postgresql://{{DB_USER}}:{{DB_PASSWORD}}@{{DB_HOST}}:5432/{{DB_NAME}}
POSTGRES_DB={{DB_NAME}}
POSTGRES_USER={{DB_USER}}
POSTGRES_PASSWORD={{DB_PASSWORD}}
DB_POOL_SIZE=20
DB_TIMEOUT=30000

# ==============================================
# SERVER CONFIGURATION
# ==============================================
PORT=3001
HOST=0.0.0.0
SERVER_URL={{SERVER_URL}}
FRONTEND_URL={{FRONTEND_URL}}

# ==============================================
# SECURITY CONFIGURATION
# ==============================================

# JWT Configuration
JWT_SECRET={{JWT_SECRET_KEY}}
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_SECRET={{REFRESH_TOKEN_SECRET}}
REFRESH_TOKEN_EXPIRES_IN=7d

# CORS Configuration
ALLOWED_ORIGINS={{ALLOWED_ORIGINS}}
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# CSP Configuration
CSP_REPORT_URI={{SERVER_URL}}/api/csp-report
CSP_REPORT_ONLY=false

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_WINDOW=600000
RATE_LIMIT_AUTH_MAX_REQUESTS=5

# Security Headers
HSTS_MAX_AGE=63072000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ==============================================
# MONITORING & ALERTS
# ==============================================

# Email Configuration (para alertas de seguridad)
SMTP_HOST={{SMTP_HOST}}
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER={{SMTP_USER}}
SMTP_PASS={{SMTP_PASSWORD}}
SMTP_FROM={{COMPANY_EMAIL_FROM}}
SECURITY_ALERT_EMAIL={{SECURITY_ALERT_EMAIL}}

# Slack Notifications (opcional)
SLACK_WEBHOOK_URL={{SLACK_WEBHOOK_URL}}

# Monitoring
MONITOR_ENABLED=true
MONITOR_ALERT_THRESHOLD_HIGH=10
MONITOR_ALERT_THRESHOLD_CRITICAL=20
MONITOR_CLEANUP_INTERVAL=3600000

# ==============================================
# ADMIN CONFIGURATION
# ==============================================
ADMIN_EMAIL={{ADMIN_EMAIL}}
ADMIN_PASSWORD={{ADMIN_PASSWORD}}
ADMIN_NAME=BikeDreams Administrator
ADMIN_ROLE=super_admin

# ==============================================
# SSL/TLS CONFIGURATION
# ==============================================
SSL_CERT_PATH=/etc/ssl/certs/bikedreams.crt
SSL_KEY_PATH=/etc/ssl/private/bikedreams.key
SSL_CHAIN_PATH=/etc/ssl/certs/bikedreams-chain.crt

# ==============================================
# BACKUP & MAINTENANCE
# ==============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
MAINTENANCE_WINDOW=02:00-04:00

# ==============================================
# EXTERNAL SERVICES
# ==============================================

# Redis (para cach√© y sesiones)
REDIS_URL=redis://redis:6379
REDIS_PASSWORD={{REDIS_PASSWORD}}
REDIS_DB=0
REDIS_TTL=3600

# File Storage
FILE_STORAGE_PATH=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx

# ==============================================
# PERFORMANCE
# ==============================================
CACHE_ENABLED=true
CACHE_TTL=3600
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_MAINTENANCE_MODE=false