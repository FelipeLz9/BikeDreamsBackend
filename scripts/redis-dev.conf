# ==============================================
# BikeDreams Backend - Redis Development Configuration
# ==============================================
# This file contains development-specific Redis configurations
# optimized for local development and debugging.

# ==============================================
# Network Configuration
# ==============================================
# Bind to all interfaces for development
bind 0.0.0.0

# Port configuration
port 6379

# TCP keepalive
tcp-keepalive 300

# ==============================================
# General Configuration
# ==============================================
# Daemonize (handled by Docker)
daemonize no

# PID file
pidfile /var/run/redis_6379.pid

# Log level (verbose for development)
loglevel debug

# Log file
logfile ""

# Database count
databases 16

# ==============================================
# Memory Management
# ==============================================
# Maximum memory usage (512MB for development)
maxmemory 512mb

# Memory eviction policy (volatile-lru for development)
maxmemory-policy volatile-lru

# ==============================================
# Persistence Configuration
# ==============================================
# RDB persistence (enabled for development)
save 900 1
save 300 10
save 60 10000

# RDB file
dbfilename dump.rdb

# RDB directory
dir /data

# RDB compression
rdbcompression yes

# RDB checksum
rdbchecksum yes

# AOF persistence (enabled for development)
appendonly yes

# AOF file
appendfilename "appendonly.aof"

# AOF sync policy (everysec for development)
appendfsync everysec

# AOF rewrite
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# ==============================================
# Security Configuration
# ==============================================
# Password (development password)
requirepass dev_redis_password

# Disable dangerous commands in development
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command KEYS ""
rename-command CONFIG "CONFIG_9a2b3c4d5e6f7g8h"

# ==============================================
# Client Configuration
# ==============================================
# Maximum number of clients
maxclients 1000

# Client timeout
timeout 300

# ==============================================
# Slow Log Configuration
# ==============================================
# Slow log threshold (100ms for development)
slowlog-log-slower-than 100000

# Slow log max length
slowlog-max-len 128

# ==============================================
# Latency Monitoring
# ==============================================
# Latency monitoring threshold
latency-monitor-threshold 100

# ==============================================
# Advanced Configuration
# ==============================================
# Hash configuration
hash-max-ziplist-entries 512
hash-max-ziplist-value 64

# List configuration
list-max-ziplist-size -2
list-compress-depth 0

# Set configuration
set-max-intset-entries 512

# Sorted set configuration
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

# HyperLogLog configuration
hll-sparse-max-bytes 3000

# Streams configuration
stream-node-max-bytes 4096
stream-node-max-entries 100

# ==============================================
# Development-Specific Settings
# ==============================================
# Enable keyspace notifications
notify-keyspace-events Ex

# Enable command tracking
tracking-table-max-keys 1000000

# Enable client tracking
client-tracking yes

# ==============================================
# Logging Configuration
# ==============================================
# Log queries
log-queries yes

# Log slow queries
log-slow-queries yes

# ==============================================
# Development Tools
# ==============================================
# Enable Redis modules (if needed)
# loadmodule /path/to/module.so

# ==============================================
# Monitoring Configuration
# ==============================================
# Enable monitoring
monitor-threshold 1000

# ==============================================
# Development Comments
# ==============================================
# This configuration is optimized for development:
# - Verbose logging for debugging
# - Smaller memory limits for local development
# - Persistence enabled for data safety
# - Dangerous commands disabled for safety
# - Monitoring enabled for performance analysis
